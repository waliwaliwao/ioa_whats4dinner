# EI332 计算机组成

**注：以下为 19 级的内容，17、18级的内容请移步 Commit History 查看。**

## 课程简介

这门课的主要内容有：

* 计算机的进化史
* 计算机的组件
* MIPS 指令集
* 处理器结构（单周期和五级流水线）
* 分级的存储结构（缓存、虚拟内存）
* 多核和多处理器
* 计算机如何算术
* I/O

## 使用教材

使用了两本教材。作业主要来自教材的中文版。
* 《计算机组成与体系结构：性能设计（原书第 8 版）》。本书主要在课程的前几节课使用，主要讲解前 3 章的内容。
* 《计算机组成与设计：硬件/软件接口（原书第 4 版）》。课程的剩余部分使用的都是这本书。

## 授课教师

方向忠老师（负责讲课）和陈颖琪老师（负责 Verilog）。陈老师对处理器的具体实现并不熟悉，具体的实验内容由助教负责。

## 授课方式

方向忠老师使用 PPT 讲解理论部分，大部分是教材配套的英文 PPT，也有部分是祖传的中文 PPT。

陈颖琪老师会在中期正式开启三个实验作业之前用一次课讲解 Verilog 基本语法和实验软件的使用，但是效果非常有限，完成实验基本依靠自学。

## 考核方式

本课程考核由作业（20%）、理论考试（40%）与实验（40%）构成。

### 作业

作业是书上的题目，**量比较大**。答案不难找到，但是部分题目答案有问题。因此建议对答案只做参考。同时，19级布置作业的节奏有问题，最后几次作业非常赶，但似乎交了就可拿到满分。

作业是本课程中比较无关紧要的部分，其目的主要是为了更好地理解授课内容，与最终的理论考试关联不大。

### 考试

理论考试部分：只要听方老师的讲课，考试不是很难，甚至不少题是论述题，敞开了写即可；某种程度上正因为是论述题，才能达到这么高的平均分。

18 级的考试题经整理后放置于[此处](https://gist.github.com/smallaccount101/6324d7c82d103783f21b7cc6da7d0f7c)。经验证，19级考到了不少其中的原题。

### 实验

实验分成预备实验（3%）、正式实验（5%+5%+12%）以及最后的实验考试（15%）。

实验主要是在软件 Quartus II 上用硬件描述语言 Verilog（语法和C很像）来描述电路的功能，并把被翻译好的电路烧录到 FPGA 板子上，去实现一些功能，如单周期 CPU、带 I/O 模块的 CPU 以及流水线 CPU 等。这一部分 **Github** 上有不少前几届学长的代码（搜索课程代码 EI332）可供参考，不过需要注意，部分学长的代码本身也有些问题，可能在某些特定情况下会出现问题，请在参考时加以判断。

而实验考试，就是提出一个小的功能去实现，以确保大家确实掌握了，避免大家只是搬运代码。例如实现一条新指令、输出一个特定的数据等。

## 如何学好~~这门课~~计算机组成与体系结构

这门课的平均分数比较高，不会难为大家。但是如果想自己真的学好，还是需要花一些时间深入的思考一下。实验部分很有意思，但是从头做可能需要比较多的时间，可以适当站在前人的肩膀上。

不过，这门课也有许多做的非常不足的地方，试列举一二，望选修此课的同学加以注意。

* 作为电子系的老师，方向忠自己对部分概念也不清晰，或是无法对同学说明白。例如，在讲授虚拟内存部分时，完全没有提及进程的概念，这就使虚拟内存的引入非常不自然。而在多核和多处理器部分，他对并发与并行、进程与线程等概念也没有做好区分，使同学易混淆各种概念。
* 实验软件难以使用。实验使用的软件为 Quartus II 与 SE2.0 汇编编写工具。前者版本较老，是 2013 年推出的一个版本，且有很多刚开始使用时难以发现的问题（如信号被优化导致波形无法显示），而这些问题往往只有在遇到后，专门问老师或者由同学们讨论才会被发现。SE2.0 则是由软件学院学生编写的业余软件，较难使用。学有余力的同学可以尝试自己编写汇编器，并使用 [MARS MIPS simulator](https://courses.missouristate.edu/KenVollmar/MARS/index.htm) 调试汇编。

笔者根据自身学习的体会，以及同学们遇到的问题，提供以下参考资料，供同学们参考。

* [UCB CS61C Spring 2015](https://inst.eecs.berkeley.edu/~cs61c/sp15/)，B 站上有配套视频教程。与参考教材1讲授内容一致。
* Computer Systems: A Programmer's Perspective (CSAPP)，推荐对计算机组成与体系结构非常有兴趣的同学阅读此书。其中，配套的 [Architecture Lab](http://csapp.cs.cmu.edu/3e/archlab-handout.tar) 与 [Cache Lab](http://csapp.cs.cmu.edu/3e/cachelab-handout.tar) 非常适合补充理解五级流水线 CPU 与 Cache 的工作原理。
